<!DOCTYPE html>
<html>

<head th:insert="librerias::librerias">
	<title>Cambio de Contraseña</title>
	

</head>

<body class="container-fluid">
	<style>
		@media (max-width: 900px) {
			.sidebar {
				height: 5vh!important;
				padding-top:17px;
			}
			.nav.pills{
				flex-direction: row!important;
			}
			#datos{
				display: flex;
				justify-content: center;
				height: 50vh;
			}
			#data-container{
				display: flex;
				flex-direction: column;
				align-items: center;
			}
			
			#formulario{
				height: 100%;
			}
			#formulario .form-group{
				margin-bottom: 20px;
			}

		}
	</style>
	<div th:insert="top"></div>
	<div class="container-fluid">
		<div class="row">
			<nav class="col bg-light sidebar">
				<div class="sidebar-sticky">
					<ul class="nav nav-pills flex-sm-column">
						<li class="nav-item">
							<a class="nav-link menu" id="data" aria-current="page" href="#"><span
									class="fas fa-user fa-sm fa-fw mr-3"></span>Mis datos</a>
						</li>
						<li class="nav-item">
							<a class="nav-link menu" id="contras" href="#"><span
									class="fas fa-lock fa-sm fa-fw mr-3"></span>Contraseña</a>
						</li>
						<li class="nav-item">
							<a class="nav-link menu" id="prefer" href="#"><span
									class="fas fa-sliders-h fa-sm fa-fw mr-3"></span>Preferencias</a>
						</li>
						<li class="nav-item" sec:authorize="hasAuthority('ROLE_ADMIN')">
							<a class="nav-link menu" id="operat" href="#"><span
									class="fas fa-wrench fa-sm fa-fw mr-3"></span>Operaciones</a>
						</li>

					</ul>
				</div>
			</nav>

			<div class="col-md-10 ml-sm-auto px-4" id="datos">
				<div id="data-container">
				<h1>Mis datos</h1>
				<form action="#" id="formulario" th:action="@{/seguridad/password/changeData}" th:object="${usuarioActual}"
					class="sm-w-50 p-3" method="post" enctype="multipart/form-data">
					<div class="form-group">
						<label for="inputName">Nombre</label>
						<input type="text" th:field="*{nombre}" class="form-control" id="inputName"
							th:attr="placeholder=${usuarioActual.nombre}">
					</div>
					<div class="form-group">
						<label for="inputUsername">Nombre de usuario</label>
						<input type="text" th:field="*{username}" class="form-control" id="inputUsername"
							th:attr="placeholder=${usuarioActual.username}">
					</div>
					<div class="form-group">
						<div class="d-flex align-items-center">
							<span>Cambiar imagen de perfil:&nbsp;&nbsp;&nbsp;</span>
							<div th:if="${img!=null}">
								<div th:if="${img.url!=null}">
									<img th:src="@{${img.url}}" alt="${image.name}" width="60px" height="60px"
										class="ml-3 rounded-circle" />
								</div>
							</div>
						</div>
						<div class="form-group mt-3">
							<input id="input-file" class="form-control" type="file" name="file" accept="image/*" />
						</div>
					</div>



					<button type="submit" class="btn btn-primary mt-3 float-end">Editar</button>
				</form>
				</div>
			</div>

			<div class="flex-column align-items-center mt-3 col-md-10 ml-sm-auto px-4" id="passwd">
				<h1>Cambio de Contraseña</h1>
				<form action="#" th:action="@{/seguridad/password/changePassword}" th:object="${usuarioPassword}"
					class="w-50 p-3" method="post">
					<div class="form-group mb-3">
						<label for="inputPassword">Contraseña Actual</label>
						<input type="password" th:field="*{actual}" class="form-control" id="inputPassword"
							placeholder="Contraseña Actual">
					</div>
					<div class="form-group mb-3">
						<label for="inputNewPassword">Nueva Contraseña</label>
						<input type="password" th:field="*{nueva}" class="form-control" id="inputNewPassword"
							placeholder="Nueva Contraseña">
					</div>
					<div class="form-group mb-3">
						<label for="inputConfirmPassword">Confirmar Nueva Contraseña</label>
						<input type="password" th:field="*{confirm}" class="form-control" id="inputConfirmPassword"
							placeholder="Confirmar Nueva Contraseña">
					</div>
					<button type="submit" class="btn btn-primary mt-3 float-end">Cambiar Contraseña</button>
				</form>

				<div class="alert alert-info text-center w-75 d-flex flex-column justify-content-center"
					style="height:10%;" role="alert">
					Cambiar la contraseña puede ser peligroso, ¡asegúrate de recordar tu nueva contraseña!
				</div>
			</div>

			<div class="flex-column col-md-10 ml-sm-auto px-4" id="operaciones">
				<h2>Operaciones</h2>
				<div class="d-flex col h-75 flex-column justify-content-around">
					<div class="card flex-grow-1 mb-3">
						<div class="card-header">
							<h4 class="text-center">Alumnos</h4>
						</div>
						<div class="d-flex w-100 h-75 align-items-center justify-content-around">
							<button type="button" class="btn btn-primary col-md-2" data-toggle="modal"
								data-target="#crearAlumno">Insertar</button>
							<button type="button" class="btn btn-danger col-md-2" data-toggle="modal"
								data-target="#modal-delete-alumno">Eliminar</button>
							<button type="button" class="btn btn-warning col-md-3" data-toggle="modal"
								data-target="#modal-search-alumno">Buscar por nombre</button>
							<button type="button" class="btn btn-warning col-md-3" data-toggle="modal"
								data-target="#modal-search-Dni-alumno">Buscar por DNI</button>
						</div>
					</div>
					<div class="card flex-grow-1 mb-3">
						<div class="card-header">
							<h4 class="text-center">Profesores</h4>
						</div>
						<div class="d-flex w-100 h-75 align-items-center justify-content-around">
							<button type="button" class="btn btn-primary col-md-2" data-toggle="modal"
								data-target="#crearProfe">Insertar</button>
							<button type="button" class="btn btn-danger col-md-2" data-toggle="modal"
								data-target="#modal-delete-profesor">Eliminar</button>
							<button type="button" class="btn btn-warning col-md-3" data-toggle="modal"
								data-target="#modal-search-profesor">Buscar por nombre</button>
							<button type="button" class="btn btn-warning col-md-3" data-toggle="modal"
								data-target="#modal-search-Dni-profesor">Buscar por DNI</button>
						</div>
					</div>
					<div class="card flex-grow-1 mb-3">
						<div class="card-header">
							<h4 class="text-center">Coches</h4c>
						</div>
						<div class="d-flex w-100 h-75 align-items-center justify-content-around">
							<button type="button" class="btn btn-primary col-md-2" data-toggle="modal"
								data-target="#crearCoche">Insertar</button>
							<button type="button" class="btn btn-danger col-md-2" data-toggle="modal"
								data-target="#modal-delete-coche">Eliminar</button>
							<button type="button" class="btn btn-warning col-md-3" data-toggle="modal"
								data-target="#modal-search-marca-coche">Buscar por marca</button>
							<button type="button" class="btn btn-warning col-md-3" data-toggle="modal"
								data-target="#modal-search-matricula-coche">Buscar por matrícula</button>
						</div>
					</div>
					<div class="card flex-grow-1 mb-3">
						<div class="card-header">
							<h4 class="text-center">Usuarios</h4>
						</div>
						<div class="d-flex w-100 h-75 align-items-center justify-content-around">
							<button type="button" class="btn btn-primary col-md-2" data-toggle="modal"
								data-target="#crearUsuario">Insertar</button>
							<button type="button" class="btn btn-danger col-md-2" data-toggle="modal"
								data-target="#delete-usuario">Eliminar</button>
						</div>
					</div>
				</div>
			</div>

			<!-- create alumno modal-->
			<div class="modal fade" id="crearAlumno">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Crear alumno/a</h4>
							<button class="close" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce el nombre para nuevo/a alumno/a:
								<!--formulario nombre a editar-->
							<form action="#" th:action="@{/seguridad/password/addAlumno}" th:object="${alumnoNuevo}"
								method="post" class="needs-validation" novalidate>
								<div class"form-row">
									<div class="form-group mt-1">
										<div class="form-group mt-1">
											<label for="texto">DNI</label>
											<input type="text" th:field="*{dni}" class="form-control"
												id="exampleInputDni" required pattern="[0-9]{8}[a-zA-Z]"
												placeholder="DNI" />
											<div class="alert alert-danger invalid-feedback">
												Un DNI está formado por 8 números seguidos de una letra
											</div>
										</div>
										<label for="nombre">Nombre</label>
										<input type="text" th:field="*{nombre}" class="form-control" id="nombre"
											placeholder="Nombre" required />
										<label for="apellidos">Apellidos</label>
										<input type="text" th:field="*{apellidos}" class="form-control" id="apellidos"
											placeholder="Apellidos" required />
										<div>
											<label for="profe">Profesor</label>
											<select th:field="*{profesor.id}" name="profesor" id="profe"
												class="form-select">
												<option th:each="profe:${listaProfesores}" th:value="${profe.id}"
													th:text="${profe.nombre}" value="">Seleccionar profesor</option>
											</select>
										</div>
										<div>
											<label for="coche">Coche</label>
											<select th:field="*{coche.id}" name="profesor" id="coche"
												class="form-select">
												<option th:each="coche:${listaCoches}" th:value="${coche.id}"
													th:text="${coche.marca}+'-'+${coche.matricula}" value="">Seleccionar
													coche
												</option>
											</select>
										</div>
									</div>
								</div>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary btn-sm" data-dismiss="modal"
								aria-hidden="true">Cancelar</button>
							<input type="submit" value="Crear" class="btn btn-primary float-right" />
						</div>
						</form>
					</div>
				</div>
			</div>
			<!-- fin create modal-->

			<!--delete modal alumno-->
			<div class="modal fade" th:id="modal-delete-alumno">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Eliminar Alumno</h4>
							<button class="close btn btn-danger" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce el ID del alumno a eliminar</p>


							<!--formulario nombre-->
							<form action="#" th:action="@{/seguridad/password/deleteAlumno}"
								th:object="${alumnoaEliminar}" method="get">
								<div class"form-row">
									<div class="form-group mt-1">
										<label for="texto">ID</label>
										<input type="text" th:field="*{id}" class="form-control" id="exampleInputName"
											placeholder="ID" />
									</div>
								</div>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary btn-sm" data-dismiss="modal"
								aria-hidden="true">Cancelar</button>
							<input id="sent" type="submit" th:value="Buscar" class="btn btn-primary float-right" />
						</div>
						</form>
					</div>
				</div>
			</div>

			<!-- fin delete modal alumno-->

			<!-- buscar por nombre modal alumno-->
			<div class="modal fade" th:id="modal-search-alumno">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Buscar Alumno</h4>
							<button class="close btn btn-danger" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce el nombre para buscar</p>


							<!--formulario nombre-->
							<form action="#" th:action="@{/seguridad/password/searchAlumnoByName}"
								th:object="${alumnoaBuscar}" method="post">
								<div class"form-row">
									<div class="form-group mt-1">
										<label for="texto">Nombre</label>
										<input type="text" th:field="*{nombre}" class="form-control"
											id="exampleInputName" placeholder="Nombre" />
									</div>
								</div>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary btn-sm" data-dismiss="modal"
								aria-hidden="true">Cancelar</button>
							<input id="sent" type="submit" th:value="Buscar" class="btn btn-primary float-right" />
						</div>
						</form>
					</div>
				</div>
			</div>
			<!-- fin modal buscar por nombre alumno-->

			<!-- buscar por dni modal alumno-->
			<div class="modal fade" th:id="modal-search-Dni-alumno">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Buscar Alumno</h4>
							<button class="close btn btn-danger" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce el DNI para buscar</p>


							<!--formulario dni-->
							<form th:action="@{/seguridad/password/searchAlumnoByDni}" th:object="${alumnoaBuscar}"
								method="post" class="needs-validation" novalidate>
								<div class"form-row">
									<div class="form-group mt-1">
										<label for="texto">DNI</label>
										<input type="text" th:field="*{dni}" class="form-control" id="exampleInputDni"
											required pattern="[0-9]{8}[a-zA-Z]" placeholder="DNI" />
										<div class="alert alert-danger invalid-feedback">
											Un DNI está formado por 8 números seguidos de una letra
										</div>
									</div>
								</div>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary btn-sm" data-dismiss="modal"
								aria-hidden="true">Cancelar</button>
							<input id="sentDni" type="submit" th:value="Buscar" class="btn btn-primary float-right" />
						</div>
						</form>
					</div>
				</div>
			</div>
			<!-- fin modal buscar por dni alumno-->


			<!--create modal-profesor-->
			<div class="modal fade" id="crearProfe">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Crear profesor/a</h4>
							<button class="close" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce el nombre para el nuevo profesor
								<!--formulario nombre a editar-->
							<form action="#" th:action="@{/seguridad/password/addProfesor}" th:object="${profeNuevo}"
								method="post" class="needs-validation" novalidate>
								<div class"form-row">
									<div class="form-group mt-1">
										<div class="form-group mt-1">
											<label for="texto">DNI</label>
											<input type="text" th:field="*{dni}" class="form-control"
												id="exampleInputDni" required pattern="[0-9]{8}[a-zA-Z]"
												placeholder="DNI" />
											<div class="alert alert-danger invalid-feedback">
												Un DNI está formado por 8 números seguidos de una letra
											</div>
										</div>
										<label for="nombre">Nombre</label>
										<input type="text" th:field="*{nombre}" class="form-control" id="nombre"
											placeholder="Nombre" />
										<label for="apellidos">Apellidos</label>
										<input type="text" th:field="*{apellidos}" class="form-control" id="apellidos"
											placeholder="Apellidos" />

									</div>
								</div>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary btn-sm" data-dismiss="modal"
								aria-hidden="true">Cancelar</button>
							<input type="submit" value="Crear" class="btn btn-primary float-right" />
						</div>
						</form>
					</div>
				</div>
			</div>
			<!-- fin create modal-->

			<!--delete modal profesor-->
			<div class="modal fade" th:id="modal-delete-profesor">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Eliminar Profesor</h4>
							<button class="close btn btn-danger" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce el ID del profesor a eliminar</p>


							<!--formulario id-->
							<form action="#" th:action="@{/seguridad/password/deleteProfesor}"
								th:object="${profeaEliminar}" method="get">
								<div class"form-row">
									<div class="form-group mt-1">
										<label for="texto">ID</label>
										<input type="text" th:field="*{id}" class="form-control" id="exampleInputName"
											placeholder="ID" />
									</div>
								</div>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary btn-sm" data-dismiss="modal"
								aria-hidden="true">Cancelar</button>
							<input id="sent" type="submit" th:value="Buscar" class="btn btn-primary float-right" />
						</div>
						</form>
					</div>
				</div>
			</div>

			<!-- fin delete modal profesor-->

			<!-- buscar por nombre modal profesor-->
			<div class="modal fade" th:id="modal-search-profesor">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Buscar Profesor</h4>
							<button class="close btn btn-danger" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce el nombre para buscar</p>


							<!--formulario nombre-->
							<form action="#" th:action="@{/seguridad/password/searchProfesorByName}"
								th:object="${profeaBuscar}" method="post">
								<div class"form-row">
									<div class="form-group mt-1">
										<label for="texto">Nombre</label>
										<input type="text" th:field="*{nombre}" class="form-control"
											id="exampleInputName" placeholder="Nombre" />
									</div>
								</div>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary btn-sm" data-dismiss="modal"
								aria-hidden="true">Cancelar</button>
							<input id="sent" type="submit" th:value="Buscar" class="btn btn-primary float-right" />
						</div>
						</form>
					</div>
				</div>
			</div>
			<!-- fin modal buscar por nombre profesor-->

			<!-- buscar por dni modal profesor-->
			<div class="modal fade" th:id="modal-search-Dni-profesor">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Buscar Profesor</h4>
							<button class="close btn btn-danger" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce el DNI para buscar</p>


							<!--formulario dni-->
							<form th:action="@{/seguridad/password/searchProfesorByDni}" th:object="${profeaBuscar}"
								method="post" class="needs-validation" novalidate>
								<div class"form-row">
									<div class="form-group mt-1">
										<label for="texto">DNI</label>
										<input type="text" th:field="*{dni}" class="form-control" required
											pattern="[0-9]{8}[a-zA-Z]" id="exampleInputDni" placeholder="DNI" />
										<div class="alert alert-danger invalid-feedback">
											Un DNI está formado por 8 números seguidos de una letra
										</div>
									</div>
								</div>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary btn-sm" data-dismiss="modal"
								aria-hidden="true">Cancelar</button>
							<input id="sentDni" type="submit" th:value="Buscar" class="btn btn-primary float-right" />
						</div>
						</form>
					</div>
				</div>
			</div>
			<!-- fin modal buscar por dni profesor-->

			<!--create modal coche-->

			<div class="modal fade" id="crearCoche">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Crear coche/a</h4>
							<button class="close" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce el nombre para el nuevo coche
								<!--formulario nombre a editar-->
							<form action="#" th:action="@{/seguridad/password/addCoche/}" th:object="${cocheNuevo}"
								method="post" class="needs-validation" novalidate>
								<div class"form-row">
									<div class="form-group mt-1">
										<label for="Marca">Marca</label>
										<input type="text" th:field="*{marca}" class="form-control" id="marca"
											placeholder="Marca" required />
										<div class="form-group mt-1">
											<label for="matricula">Matrícula</label>
											<input type="text" th:field="*{matricula}" class="form-control"
												pattern="[0-9]{4}\s[a-zA-Z]{3}" required id="matricula"
												placeholder="Matrícula" />
											<div class="alert alert-danger invalid-feedback">
												Por favor, ingresa 4 números y 3 letras separados por un espacio
											</div>
										</div>
										<label for="modelo">Modelo</label>
										<input type="text" th:field="*{modelo}" class="form-control" id="modelo"
											placeholder="Modelo" required />
										<label for="fecha">Fecha ITV</label>
										<input type="date" name="fechaITV" th:field="*{fechaITV}" class="form-control"
											id="fecha" placeholder="fechaITV" required />

									</div>
								</div>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary btn-sm" data-dismiss="modal"
								aria-hidden="true">Cancelar</button>
							<input type="submit" value="Crear" class="btn btn-primary float-right" />
						</div>
						</form>
					</div>
				</div>
			</div>
			<!-- fin create modal coche-->

			<!--delete modal coche-->
			<div class="modal fade" th:id="modal-delete-coche">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Eliminar Coche</h4>
							<button class="close btn btn-danger" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce el ID del coche a eliminar</p>


							<!--formulario id-->
							<form action="#" th:action="@{/seguridad/password/deleteCoche}"
								th:object="${profeaEliminar}" method="get">
								<div class"form-row">
									<div class="form-group mt-1">
										<label for="texto">ID</label>
										<input type="text" th:field="*{id}" class="form-control" id="exampleInputName"
											placeholder="ID" />
									</div>
								</div>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary btn-sm" data-dismiss="modal"
								aria-hidden="true">Cancelar</button>
							<input id="sent" type="submit" th:value="Buscar" class="btn btn-primary float-right" />
						</div>
						</form>
					</div>
				</div>
			</div>

			<!-- fin delete modal coche-->

			<!-- buscar por marca modal-->
			<div class="modal fade" th:id="modal-search-marca-coche">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Buscar Coche</h4>
							<button class="close btn btn-danger" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce la marca para buscar</p>


							<!--formulario marca-->
							<form action="#" th:action="@{/seguridad/password/searchCochesByMarca}"
								th:object="${cocheaBuscar}" method="post">
								<div class"form-row">
									<div class="form-group mt-1">
										<label for="texto">Marca</label>
										<input type="text" th:field="*{marca}" class="form-control"
											id="exampleInputName" placeholder="Marca" />
									</div>
								</div>

								<div class="modal-footer">
									<button class="btn btn-secondary btn-sm" data-dismiss="modal"
										aria-hidden="true">Cancelar</button>
									<input id="sent" type="submit" th:value="Buscar"
										class="btn btn-primary float-right" />
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
			<!-- fin modal buscar por marca-->

			<!-- buscar por marca modal-->
			<div class="modal fade" th:id="modal-search-matricula-coche">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Buscar Coche</h4>
							<button class="close btn btn-danger" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce la matricula para buscar</p>


							<!--formulario marca-->
							<form action="#" th:action="@{/seguridad/password/searchCocheByMatricula}"
								th:object="${cocheaBuscar}" method="post" class="needs-validation" novalidate>
								<div class"form-row">
									<div class="form-group mt-1">
										<label for="texto">Matricula</label>
										<input type="text" th:field="*{matricula}" class="form-control"
											id="exampleInputName" pattern="[0-9]{4}\s[a-zA-Z]{3}"
											placeholder="Matricula" />
										<div class="alert alert-danger invalid-feedback">
											Por favor, ingresa 4 números y 3 letras separados por un espacio
										</div>
									</div>
								</div>

								<div class="modal-footer">
									<button class="btn btn-secondary btn-sm" data-dismiss="modal"
										aria-hidden="true">Cancelar</button>
									<input id="sent" type="submit" th:value="Buscar"
										class="btn btn-primary float-right" />
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
			<!-- fin modal buscar por marca-->

			<!--create usuario modal-->
			<div class="modal fade" th:id="crearUsuario">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Insertar Usuario</h4>
							<button class="close btn btn-danger" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Introduce la informacion para el nuevo usuario</p>


							<form method="post" th:action="@{/seguridad/password/addUsuario}" th:object="${newUserDTO}">
								<div class="form-row">
									<div class="form-group col-8">
										<label for="inputnombre">Nickname</label>
										<input placeholder="Nombre" th:field="*{nombre}" type="text" id="nombre"
											name="nombre" required="true" class="form-control text-grape-900" />
									</div>
								</div>
								<div class="form-row">
									<div class="form-group col-8">
										<label for="inputnombre">Usuario/a</label>
										<input th:field="*{username}" placeholder="Usuario/a" type="text" id="username"
											name="username" required="true" class="form-control text-grape-900" />
									</div>
								</div>
								<div class="form-row">
									<div class="form-group col-8">
										<label for="inputPass">Contraseña</label>
										<div class="input-group" id="show_hide_password">
											<input placeholder="Password" type="password" name="password" id="password"
												required="true" class="form-control text-grape-900" />
											<div class="input-group-text">
												<a href=""><i class="fa fa-eye-slash" aria-hidden="true"> </i></a>
											</div>
										</div>
									</div>
								</div>

								<div sec:authorize="hasAuthority('ROLE_ADMIN')" class="form-row">
									<div class="form-group col-8">
										<div class="form-check">
											<input class="form-check-input" type="checkbox" th:field="*{esProfesor}"
												id="esProfesor">
											<label class="form-check-label" for="esProfesor">
												Es profesor
											</label>
										</div>
									</div>
								</div>

								<div sec:authorize="hasAuthority('ROLE_ADMIN')" class="form-row">
									<div class="form-group col-8">
										<div class="form-check">
											<input class="form-check-input" type="checkbox" th:field="*{esAlumno}"
												id="esAlumno">
											<label class="form-check-label" for="esProfesor">
												Es alumno
											</label>
										</div>
									</div>
								</div>

								<div class="form-row" id="selectProfesor" style="display:none">
									<div class="form-group col-8">
										<label for="inputProfesor">Seleccione el profesor</label>
										<select class="form-control" th:field="*{idProfesor}" id="tipoProfesor">
											<option th:each="profe:${listaProfesores}" th:value="${profe.id}"
												th:text="${profe.nombre}"></option>
										</select>
									</div>
								</div>

								<div class="form-row" id="selectAlumno" style="display:none">
									<div class="form-group col-8">
										<label for="inputAlumno">Seleccione el alumno</label>
										<select class="form-control" th:field="*{idAlumno}" id="tipoAlumno">
											<option th:each="alumno:${listaAlumnos}" th:value="${alumno.id}"
												th:text="${alumno.nombre}"></option>
										</select>
									</div>
								</div>
								<div class="form-row m-auto">
									<input type="submit" value="Registrar" class="btn btn-primary float-right mt-3"
										th:href="@{/seguridad/password/addUsuario}" />
								</div>
							</form>
						</div>
					</div>

				</div>
			</div>

			<!--fin create modal usuario-->

			<!--delete usuario modal-->
			<div class="modal fade" th:id="delete-usuario">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title" id="exampleModalLabel">Eliminar Usuario</h4>
							<button class="close btn btn-danger" type="button" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="error-text">Selecciona el usuario que deseas eliminar</p>


							<form action="#" th:action="@{/seguridad/password/deleteUsuario}" th:object="${userDelete}"
								method="get">
								<div class"form-row">
									<div class="form-group mt-1">

										<div>
											<label for="user">Usuarios</label>
											<select th:field="*{id}" name="user" id="user">
												<option th:each="user:${listaUsuarios}" th:value="${user.id}"
													th:text="${user.nombre}" value="">Seleccionar Usuario</option>
											</select>
										</div>

									</div>
								</div>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary btn-sm" data-dismiss="modal"
								aria-hidden="true">Cancelar</button>
							<input type="submit" value="Eliminar" class="btn btn-primary float-right" />
						</div>
						</form>
					</div>
				</div>

			</div>
			<!--fin delete modal usuario-->


		</div>
		<div class="toast-container position-fixed bottom-0 end-0 p-3">
			<div th:if="${vacio}" id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true"
				data-delay="5000">
				<div class="toast-header">
					<i class="fas fa-exclamation-triangle me-2 fa-beat" style="color: #e00606;"></i>
					<strong class="me-auto">¡Alerta!</strong>
					<small>Justo ahora</small>
					<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
				</div>
				<div class="toast-body">
					¡No deberías dejar a la escuela sin profesores!
				</div>
			</div>
		</div>

		<div class="toast-container position-fixed bottom-0 end-0 p-3">
			<div th:if="${error}" id="toastDuplicateDNI" class="toast" role="alert" aria-live="assertive"
				aria-atomic="true" data-delay="5000" style="background-color: #f8d7da; border-color: #f1aeb5;">
				<div class="toast-header">
					<i class="fa-sharp fa-solid fa-xmark fa-fade" style="color: #e6707c;"></i>
					<strong class="me-auto">&nbsp;¡Error!</strong>
					<small>Justo ahora</small>
					<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
				</div>
				<div class="toast-body">
					[[${error}]]
				</div>
			</div>
		</div>

		<div class="toast-container position-fixed bottom-0 end-0 p-3">
			<div th:if="${status==1}" id="toastSucess" class="toast" role="alert" aria-live="assertive"
				aria-atomic="true" data-delay="5000" style="background-color: #d1e7dd; border-color: #a3cfbb;">
				<div class="toast-header">
					<i class="fa-sharp fa-solid fa-check fa-bounce" style="color: #74b497;"></i>
					<strong class="me-auto">&nbsp;¡Éxito!</strong>
					<small>Justo ahora</small>
					<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
				</div>
				<div class="toast-body">
					¡La contraseña ha sido cambiada!
				</div>
			</div>
		</div>

		<div class="toast-container position-fixed bottom-0 end-0 p-3">
			<div th:if="${status==2}" id="toastFailed" class="toast" role="alert" aria-live="assertive"
				aria-atomic="true" data-delay="5000" style="background-color: #f8d7da; border-color: #f1aeb5;">
				<div class="toast-header">
					<i class="fa-sharp fa-solid fa-xmark fa-fade" style="color: #e6707c;"></i>
					<strong class="me-auto">&nbsp;¡Error!</strong>
					<small>Justo ahora</small>
					<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
				</div>
				<div class="toast-body">
					¡Los datos introducidos no son válidos!
				</div>
			</div>
		</div>
	</div>
	<script th:inline="javascript">
		var vacio = /*[[${vacio}]]*/ false;
		var status = /*[[${status}]]*/ false;
		var error = /*[[${error}]]*/ "";

		if (error) {
			const toastLiveExample = document.getElementById('toastDuplicateDNI');
			const toastBootstrap = new bootstrap.Toast(toastLiveExample);
			const toastCloseButton = toastLiveExample.querySelector('.btn-close');

			toastCloseButton.addEventListener('click', function () {
				toastBootstrap.hide();
			});

			toastBootstrap.show();
		}


		if (vacio) {
			const toastLiveExample = document.getElementById('liveToast');
			const toastBootstrap = new bootstrap.Toast(toastLiveExample);
			const toastCloseButton = toastLiveExample.querySelector('.btn-close');

			toastCloseButton.addEventListener('click', function () {
				toastBootstrap.hide();
			});

			toastBootstrap.show();
		}

		if (status == 1) {
			const toastLiveExample = document.getElementById('toastSucess');
			const toastBootstrap = new bootstrap.Toast(toastLiveExample);
			const toastCloseButton = toastLiveExample.querySelector('.btn-close');

			toastCloseButton.addEventListener('click', function () {
				toastBootstrap.hide();
			});

			toastBootstrap.show();
		} else {
			if (status == 2) {
				const toastLiveExample = document.getElementById('toastFailed');
				const toastBootstrap = new bootstrap.Toast(toastLiveExample);
				const toastCloseButton = toastLiveExample.querySelector('.btn-close');

				toastCloseButton.addEventListener('click', function () {
					toastBootstrap.hide();
				});

				toastBootstrap.show();
			}
		}

		console.log(status)


	</script>
</body>
<link rel="stylesheet" th:href="@{/css/contras.css}">
<script th:src="@{/js/seguridadScript.js}"></script>
<script th:src="@{/js/registroFormSelect.js}"></script>
<script th:src="@{/js/validaForm.js}"></script>

</html>