<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset='utf-8' />
	<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.7/index.global.min.js'></script>
	<link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet'>
	<link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css' rel='stylesheet'>
	<script src='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js'></script>
	<script src="https://kit.fontawesome.com/6fcc8fb59a.js" crossorigin="anonymous"></script>
	<script>

		document.addEventListener('DOMContentLoaded', function () {
			var calendarEl = document.getElementById('calendar');
			var calendar = new FullCalendar.Calendar(calendarEl, {
				initialView: 'dayGridMonth',
				themeSystem: 'bootstrap5',
				buttonText: {
					today: 'Hoy' // Cambia el texto del botón "Today" a "Hoy"
				},
				dateClick: function (info) {
					var modal = document.getElementById('crearClase');
					var modalInstance = new bootstrap.Modal(modal);

					var modalMessage = modal.querySelector('.error-text');
					modalMessage.textContent = 'Crear una clase para el día ' + info.dateStr;

					var form = modal.querySelector('form');
					var actionUrl = form.getAttribute('action');
					var dateParam = 'fecha=' + info.dateStr;

					form.setAttribute('action', actionUrl + '?' + dateParam);

					modalInstance.show();

				}
			});
			calendar.render();
		});


	</script>
</head>

<body>
	<div th:insert="top"></div>
	<div id='calendar'></div>

	<div class="modal fade" id="crearClase">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title" id="exampleModalLabel">Crear clase</h4>
					<button class="close btn btn-danger" type="button" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">x</span>
					</button>
				</div>
				<div class="modal-body">
					<p class="error-text">Configura la clase:
						<!--formulario nombre a editar-->
					<form action="#" th:action="@{/calendario/add/}" th:object="${claseNueva}" method="post"
						class="needs-validation" novalidate>
						<div class="modal-body">
							<label for="alumno">Alumno</label>
							<select th:field="*{alumno}" name="alumno" id="alumno">
								<option th:each="alumno:${listaAlumnos}" th:value="${alumno.id}"
									th:text="${alumno.nombre}" value="">Seleccionar alumno</option>
							</select>
							
							<label for="hora">Hora</label>
							<input type="time" th:field="*{hora}" class="form-control"/>
						</div>
						<div class="modal-footer">
							<button class="btn btn-secondary btn-sm" data-dismiss="modal"
								aria-hidden="true">Cancelar</button>
							<input type="submit" value="Crear" class="btn btn-primary float-right" />
						</div>
					</form>
				</div>
			</div>
		</div>
</body>
<link rel="stylesheet" th:href="@{/css/calendario.css}">
<script th:src="@{/js/calendario.js}"></script>

</html>